
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>A General Theory of Stream and Table Relativity Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="section5.html" />
    
    
    <link rel="prev" href="section3.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../INTRODUCTION.html">
            
                <a href="../INTRODUCTION.html">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../chapter1/">
            
                <a href="../chapter1/">
            
                    
                    Chapter1 Streaming 101
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../chapter1/section1.1.html">
            
                <a href="../chapter1/section1.1.html">
            
                    
                    Section1.1 Terminology: What Is Streaming?
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="../chapter1/section1.2.html">
            
                <a href="../chapter1/section1.2.html">
            
                    
                    Section1.2 Data Processing Patterns
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="../chapter1/summary.html">
            
                <a href="../chapter1/summary.html">
            
                    
                    Summary
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../chapter2/">
            
                <a href="../chapter2/">
            
                    
                    Chapter2 The What, Where,When, and How of Data Processing
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../chapter1/section1.1.html">
            
                <a href="../chapter1/section1.1.html">
            
                    
                    Section2.1 Roadmap
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../chapter2/section1.2.html">
            
                <a href="../chapter2/section1.2.html">
            
                    
                    Section2.2 Batch Foundations: What and Where
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="../chapter2/summary0.html">
            
                <a href="../chapter2/summary0.html">
            
                    
                    Going Streaming: When and How
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="../chapter2/summary.html">
            
                <a href="../chapter2/summary.html">
            
                    
                    Summary
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../chapter3/">
            
                <a href="../chapter3/">
            
                    
                    Chapter3  Watermarks
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="../chapter3/section1.html">
            
                <a href="../chapter3/section1.html">
            
                    
                    Section3.1 Definition
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="../chapter3/section2.html">
            
                <a href="../chapter3/section2.html">
            
                    
                    Section3.2 Source Watermark Creation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="../chapter3/section3.html">
            
                <a href="../chapter3/section3.html">
            
                    
                    Watermark Propagation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4" data-path="../chapter3/section4.html">
            
                <a href="../chapter3/section4.html">
            
                    
                    Percentile Watermarks
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.5" data-path="../chapter3/section5.html">
            
                <a href="../chapter3/section5.html">
            
                    
                    Processing-Time Watermarks
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.6" data-path="../chapter3/section6.html">
            
                <a href="../chapter3/section6.html">
            
                    
                    Case Studies
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.7" data-path="../chapter3/section7.html">
            
                <a href="../chapter3/section7.html">
            
                    
                    Watermark Propagation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.8" data-path="../chapter3/summary.md">
            
                <span>
            
                    
                    Summary
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../chapter4/">
            
                <a href="../chapter4/">
            
                    
                    Chapter 4. Advanced Windowing
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="../chapter4/section1.html">
            
                <a href="../chapter4/section1.html">
            
                    
                    When/Where: Processing-Time Windows
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="../chapter4/section2.html">
            
                <a href="../chapter4/section2.html">
            
                    
                    Where: Session Windows
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="../chapter4/section3.html">
            
                <a href="../chapter4/section3.html">
            
                    
                    Where: Custom Windowing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4" data-path="../chapter4/summary.html">
            
                <a href="../chapter4/summary.html">
            
                    
                    Summary
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../chapter5/">
            
                <a href="../chapter5/">
            
                    
                    Chapter5 Exactly-Once and Side Effects
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="../chapter5/section1.html">
            
                <a href="../chapter5/section1.html">
            
                    
                    Why Exactly Once Matters
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2" data-path="../chapter5/section2.html">
            
                <a href="../chapter5/section2.html">
            
                    
                    Accuracy Versus Completeness
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3" data-path="../chapter5/section3.html">
            
                <a href="../chapter5/section3.html">
            
                    
                    Ensuring Exactly Once in Shuffle
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.4" data-path="../chapter5/section4.html">
            
                <a href="../chapter5/section4.html">
            
                    
                    Addressing Determinism
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.5" data-path="../chapter5/section5.html">
            
                <a href="../chapter5/section5.html">
            
                    
                    Performance
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.6" data-path="../chapter5/section6.html">
            
                <a href="../chapter5/section6.html">
            
                    
                    Exactly Once in Sources
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.7" data-path="../chapter5/section7.html">
            
                <a href="../chapter5/section7.html">
            
                    
                    Exactly Once in Sinks
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.8" data-path="../chapter5/section8.html">
            
                <a href="../chapter5/section8.html">
            
                    
                    Use Cases
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.9" data-path="../chapter5/section8.html">
            
                <a href="../chapter5/section8.html">
            
                    
                    Other Systems
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.10" data-path="../chapter5/section9.html">
            
                <a href="../chapter5/section9.html">
            
                    
                    Summary
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="./">
            
                <a href="./">
            
                    
                    Chapter6 Streams and Tables
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1" data-path="section1.html">
            
                <a href="section1.html">
            
                    
                    Stream-and-Table Basics Or: a Special Theory of Stream and Table Relativity
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2" data-path="section2.html">
            
                <a href="section2.html">
            
                    
                    Batch Processing Versus Streams and Tables
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.3" data-path="section3.html">
            
                <a href="section3.html">
            
                    
                    What, Where, When, and How in a Streams and Tables World
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.8.4" data-path="section4.html">
            
                <a href="section4.html">
            
                    
                    A General Theory of Stream and Table Relativity
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.5" data-path="section5.html">
            
                <a href="section5.html">
            
                    
                    Summary
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="../chapter7/">
            
                <a href="../chapter7/">
            
                    
                    Chapter 7. The Practicalities of Persistent State
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.9.1" data-path="../chapter7/section1.html">
            
                <a href="../chapter7/section1.html">
            
                    
                    Motivation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2" data-path="../chapter7/section2.html">
            
                <a href="../chapter7/section2.html">
            
                    
                    Implicit State
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.3" data-path="../chapter7/section3.html">
            
                <a href="../chapter7/section3.html">
            
                    
                    Generalized State
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.4" data-path="../chapter7/section4.html">
            
                <a href="../chapter7/section4.html">
            
                    
                    Summary
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="../chapter8/">
            
                <a href="../chapter8/">
            
                    
                    Chapter 8. Streaming SQL
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.1" data-path="../chapter8/section1.html">
            
                <a href="../chapter8/section1.html">
            
                    
                    What Is Streaming SQL?
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.2" data-path="../chapter8/section2.html">
            
                <a href="../chapter8/section2.html">
            
                    
                    Looking Backward: Stream and Table Biases
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.3" data-path="../chapter8/section3.html">
            
                <a href="../chapter8/section3.html">
            
                    
                    Looking Forward: Toward Robust Streaming SQL
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.4" data-path="../chapter8/section4.html">
            
                <a href="../chapter8/section4.html">
            
                    
                    Summary
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="../chapter9/">
            
                <a href="../chapter9/">
            
                    
                    Chapter 9. Streaming Joins
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.11.1" data-path="../chapter9/section2.html">
            
                <a href="../chapter9/section2.html">
            
                    
                    All Your Joins Are Belong to Streaming
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.2" data-path="../chapter9/section3.html">
            
                <a href="../chapter9/section3.html">
            
                    
                    Unwindowed Joins
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.3" data-path="../chapter9/section4.html">
            
                <a href="../chapter9/section4.html">
            
                    
                    Windowed Joins
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.4" data-path="../chapter9/section5.html">
            
                <a href="../chapter9/section5.html">
            
                    
                    Summary
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.12" data-path="../chapter10/">
            
                <a href="../chapter10/">
            
                    
                    Chapter 10. The Evolution of Large-Scale Data Processing
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.12.1" data-path="../chapter10/section1.html">
            
                <a href="../chapter10/section1.html">
            
                    
                    MapReduce
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.2" data-path="../chapter10/section2.html">
            
                <a href="../chapter10/section2.html">
            
                    
                    Hadoop
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.3" data-path="../chapter10/section3.html">
            
                <a href="../chapter10/section3.html">
            
                    
                    Flume
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.4" data-path="../chapter10/section4.html">
            
                <a href="../chapter10/section4.html">
            
                    
                    Storm
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.5" data-path="../chapter10/section5.html">
            
                <a href="../chapter10/section5.html">
            
                    
                    Spark
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.6" data-path="../chapter10/section6.html">
            
                <a href="../chapter10/section6.html">
            
                    
                    MillWheel
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.7" data-path="../chapter10/section7.html">
            
                <a href="../chapter10/section7.html">
            
                    
                    Kafaka
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.8" data-path="../chapter10/section8.html">
            
                <a href="../chapter10/section8.html">
            
                    
                    CloudDataFlow
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.9" data-path="../chapter10/section9.html">
            
                <a href="../chapter10/section9.html">
            
                    
                    Flink
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.10" data-path="../chapter10/section9.html">
            
                <a href="../chapter10/section9.html">
            
                    
                    Beam
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.11" data-path="../chapter10/section10.html">
            
                <a href="../chapter10/section10.html">
            
                    
                    Summary
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >A General Theory of Stream and Table Relativity</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h2 id="a-general-theory-of-stream-and-table-relativity">A General Theory of Stream and Table Relativity</h2>
<p>Having surveyed how stream processing, batch processing, the four
<em>what</em> / <em>where</em> / <em>when</em> / <em>how</em> questions, and the Beam Model as a whole relate to
stream and table theory, let&#x2019;s now attempt to articulate a more general
definition of stream and table relativity.</p>
<p><em>A general theory of stream and table relativity</em> :</p>
<pre><code>Data processing pipelines (both batch and streaming) consist of
tables , streams , and operations upon those tables and streams.
Tables are data at rest , and act as a container for data to accumulate
and be observed over time.
</code></pre><pre><code>Streams are data in motion , and encode a discretized view of the
evolution of a table over time.
</code></pre><pre><code>Operations act upon a stream or table and yield a new stream or
table. They are categorized as follows:
</code></pre><pre><code>stream &#x2192; stream: Nongrouping (element-wise) operations
Applying nongrouping operations to a stream alters the data
in the stream while leaving them in motion, yielding a new
stream with possibly different cardinality.
</code></pre><pre><code>stream &#x2192; table: Grouping operations
Grouping data within a stream brings those data to rest,
yielding a table that evolves over time.
</code></pre><pre><code>Windowing incorporates the dimension of event
time into such groupings.
Merging windows dynamically combine over time,
allowing them to reshape themselves in response to
</code></pre><pre><code>the data observed and dictating that key remain the
unit of atomicity/parallelization, with window
being a child component of grouping within that
key.
</code></pre><pre><code>table &#x2192; stream: Ungrouping (triggering) operations
Triggering data within a table ungroups them into motion,
yielding a stream that captures a view of the table&#x2019;s
evolution over time.
</code></pre><pre><code>Watermarks provide a notion of input
completeness relative to event time, which is a
useful reference point when triggering event-
timestamped data, particularly data grouped into
event-time windows from unbounded streams.
</code></pre><pre><code>The accumulation mode for the trigger determines
the nature of the stream, dictating whether it
contains deltas or values, and whether retractions
for previous deltas/values are provided.
</code></pre><pre><code>table &#x2192; table: (none)
There are no operations that consume a table and yield a
table, because it&#x2019;s not possible for data to go from rest and
back to rest without being put into motion. As a result, all
modifications to a table are via conversion to a stream and
back again.
</code></pre><p>What I love about these rules is that they just make sense. They have a very
natural and intuitive feeling about them, and as a result they make it so much
easier to understand how data flow (or don&#x2019;t) through a sequence of
operations. They codify the fact that data exist in one of two constitutions at
any given time (streams or tables), and they provide simple rules for
reasoning about the transitions between those states. They demystify
windowing by showing how it&#x2019;s just a slight modification of a thing everyone</p>
<p>already innately understands: grouping. They highlight why grouping
operations in general are always such a sticking point for streaming (because
they bring data in streams to rest as tables) but also make it very clear what
sorts of operations are needed to get things unstuck (triggers; i.e., ungrouping
operations). And they underscore just how unified batch and stream
processing really are, at a conceptual level.</p>
<p>When I set out to write this chapter, I wasn&#x2019;t entirely sure what I was going to
end up with, but the end result was much more satisfying than I&#x2019;d imagined it
might be. In the chapters to come, we use this theory of stream and table
relativity again and again to help guide our analyses. And every time, its
application will bring clarity and insight that would otherwise have been
much harder to gain. Streams and tables are the best.</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="section3.html" class="navigation navigation-prev " aria-label="Previous page: What, Where, When, and How in a Streams and Tables World">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="section5.html" class="navigation navigation-next " aria-label="Next page: Summary">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"A General Theory of Stream and Table Relativity","level":"1.8.4","depth":2,"next":{"title":"Summary","level":"1.8.5","depth":2,"path":"chapter6/section5.md","ref":"chapter6/section5.md","articles":[]},"previous":{"title":"What, Where, When, and How in a Streams and Tables World","level":"1.8.3","depth":2,"path":"chapter6/section3.md","ref":"chapter6/section3.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":["livereload"],"pluginsConfig":{"livereload":{},"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"chapter6/section4.md","mtime":"2019-10-27T13:15:07.000Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2019-10-03T07:23:23.538Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-livereload/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

